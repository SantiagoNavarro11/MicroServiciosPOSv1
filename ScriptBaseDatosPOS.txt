-- Crear base de datos si no existe
IF NOT EXISTS (SELECT name FROM sys.databases WHERE name = 'MicroServiciosPOS')
BEGIN
    CREATE DATABASE MicroServiciosPOS;
END
GO

USE MicroServiciosPOS;
GO

-- Crear un esquema para inventario
IF NOT EXISTS (SELECT * FROM sys.schemas WHERE name = 'Inventario')
BEGIN
    EXEC('CREATE SCHEMA Inventario');
END
GO

-- Crear tabla dentro del esquema Inventario
CREATE TABLE Inventario.Producto
(
    ProductoId INT IDENTITY(1,1) PRIMARY KEY,
    CodigoBarras NVARCHAR(50) NOT NULL UNIQUE,
    Nombre NVARCHAR(150) NOT NULL,
    Precio DECIMAL(18,2) NOT NULL,
    Costo DECIMAL(18,2) NULL,
    Stock INT NOT NULL DEFAULT 0,
    FechaRegistro DATETIME NOT NULL DEFAULT GETDATE(),
    Activo BIT NOT NULL DEFAULT 1
);
GO


-- Crear el esquema Seguridad si no existe
IF NOT EXISTS (SELECT * FROM sys.schemas WHERE name = 'Seguridad')
BEGIN
    EXEC('CREATE SCHEMA Seguridad');
END;
GO

-- Ahora sí crear la tabla
CREATE TABLE Seguridad.Usuario (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Nombre NVARCHAR(100) NOT NULL,
    Correo NVARCHAR(150) NOT NULL UNIQUE,
    Contrasena NVARCHAR(255) NOT NULL,
    FechaRegistro DATETIME NOT NULL DEFAULT(GETDATE()),
    Estado BIT NOT NULL DEFAULT(1)
);
